<application key="confluence">
    <component key="confluenceProductAccessor"
               class="com.atlassian.labs.remoteapps.product.confluence.ConfluenceProductAccessor"/>

    <api-scope key="read_content" class="com.atlassian.labs.remoteapps.product.confluence.ReadContentScope"
               name="Read Content">
        <description>
            Read spaces, blogs, and pages and associated metadata
        </description>
    </api-scope>

    <api-scope key="modify_attachments" class="com.atlassian.labs.remoteapps.product.confluence.ModifyAttachmentsScope"
               name="Modify Attachments">
        <description>
            Add, remove, or move attachments for pages or blog posts
        </description>
    </api-scope>

    <api-scope key="read_users_and_groups"
               class="com.atlassian.labs.remoteapps.product.confluence.ConfluenceReadUsersAndGroupsScope"
               name="Read Users and Groups">
        <description>
            View users, users info, and groups
        </description>
    </api-scope>

    <api-scope key="edit_spaces"
               class="com.atlassian.labs.remoteapps.product.confluence.EditSpacesScope"
               name="Edit Spaces">
        <description>
            Add, edit and remove spaces.
        </description>
    </api-scope>

    <api-scope key="read_server_information"
               class="com.atlassian.labs.remoteapps.product.confluence.ReadServerInformationScope"
               name="Read Server Information">
        <description>
            View Confluence version number, Base URL and build information
        </description>
    </api-scope>

    <api-scope key="modify_users"
               class="com.atlassian.labs.remoteapps.product.confluence.ModifyUsersScope"
               name="Modify Users">
        <description>
            Change users' profile pictures
        </description>
    </api-scope>

    <api-scope key="manage_watchers"
               class="com.atlassian.labs.remoteapps.product.confluence.ManageWatchersScope"
               name="Manage Watchers">
        <description>
            View space, page and blog post watchers. Add new watchers
        </description>
    </api-scope>

    <api-scope key="label_content"
               class="com.atlassian.labs.remoteapps.product.confluence.LabelContentScope"
               name="Label Content">
        <description>
            Add and remove labels from spaces, pages and blog posts
        </description>
    </api-scope>

    <api-scope key="render_content"
               class="com.atlassian.labs.remoteapps.product.confluence.RenderContentScope"
               name="Render Content">
        <description>
            Convert content into viewable HTML
        </description>
    </api-scope>

    <api-scope key="edit_content"
               class="com.atlassian.labs.remoteapps.product.confluence.EditContentScope"
               name="Edit Content">
        <description>
            Add, edit and remove pages, blogs and comments
        </description>
    </api-scope>

    <remote-module key="macro" name="Macro" class="com.atlassian.labs.remoteapps.modules.confluence.MacroModuleGenerator">
        <description>A Confluence macro that returns XHTML in the Confluence storage format to be cached forever</description>
        <schema id="macro.xsd" path="/xsd/macro.xsd" type="MacroType"/>
    </remote-module>

    <remote-module key="confluence-profile-page" name="User Profile Page" class="com.atlassian.labs.remoteapps.modules.page.ProfilePageModuleGenerator">
        <description>A user profile page decorated as a user profile tab</description>
        <schema id="page.xsd" path="/xsd/page.xsd"  type="PageType"/>
    </remote-module>

    <remote-module key="confluence-webhooks" name="Web Hook" class="com.atlassian.labs.remoteapps.modules.webhook.WebHookModuleGenerator">
        <description>Registration for a web hook callback from an internal event</description>
        <schema id="webhook.xsd" path="/xsd/webhook-confluence.xsd" type="WebHookType" />
    </remote-module>

    <web-item key="remoteapps.all.link" section="system.browse" weight="1">
        <label>All Remote Apps</label>
        <link>/plugins/servlet/speakeasy/user</link>
    </web-item>

    <web-section key="admin.pages" name="Remote Apps" location="system.admin" weight="100">
        <label>Remote Apps</label>
    </web-section>

    <rest key="rest-confluence" path="/remoteapps" version="1">
        <dispatcher>REQUEST</dispatcher>
        <dispatcher>INCLUDE</dispatcher>
        <package>com.atlassian.labs.remoteapps.rest</package>
        <package>com.atlassian.labs.remoteapps.product.confluence.rest</package>
    </rest>

    <servlet key="remoteAppsImagePlaceholderServlet"
             name="Remote Apps Image Placeholder Servlet"
             class="com.atlassian.labs.remoteapps.product.confluence.RemoteAppsImagePlaceholderServlet">
        <description>Requests the image placeholder for the remote app</description>
        <url-pattern>/remoteImage</url-pattern>
    </servlet>

    <component key="macroContentManager" class="com.atlassian.labs.remoteapps.modules.confluence.MacroContentManager"/>
    <component key="confluenceEventHandler" class="com.atlassian.labs.remoteapps.product.confluence.ConfluenceEventHandler" />

    <component-import key="bandanaManager" interface="com.atlassian.bandana.BandanaManager" />
    <component-import key="spaceManager" interface="com.atlassian.confluence.spaces.SpaceManager" />
    <component-import key="pageManager" interface="com.atlassian.confluence.pages.PageManager" />

    <component-import key="systemInfoService"
                      interface="com.atlassian.confluence.status.service.SystemInformationService"/>
    <component-import key="xmlService" interface="com.atlassian.confluence.xhtml.api.XhtmlContent"/>
    <component-import key="i18nBean" interface="com.atlassian.confluence.util.i18n.I18NBeanFactory"/>

    <!-- activity streams -->
    <component-import key="confluenceUserProfileAccessor" interface="com.atlassian.streams.spi.UserProfileAccessor"/>
    <activity-streams-provider key="apps-provider" name="Remote Apps Provider"
                               class="com.atlassian.labs.remoteapps.streams.RemoteAppsActivityProvider">
    </activity-streams-provider>
</application>