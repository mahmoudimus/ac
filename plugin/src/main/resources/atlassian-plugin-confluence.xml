<application key="confluence">
    <component key="hostContainer" class="com.atlassian.plugin.osgi.bridge.external.SpringHostContainer" />
    <component key="confluenceProductAccessor"
               class="com.atlassian.plugin.remotable.plugin.product.confluence.ConfluenceProductAccessor"/>
    <component key="confluenceUserPreferencesRetriever" class="com.atlassian.plugin.remotable.plugin.product.confluence.ConfluenceUserPreferencesRetriever"
               interface="com.atlassian.plugin.remotable.plugin.UserPreferencesRetriever"/>

    <!-- Web panel parameter extractors -->
    <component key="pageIdParameterExtractor"
               class="com.atlassian.plugin.remotable.plugin.module.webpanel.extractor.confluence.PageIdWebPanelParameterExtractor"
               interface="com.atlassian.plugin.remotable.plugin.module.webpanel.extractor.WebPanelParameterExtractor" />

    <component key="spaceIdParameterExtractor"
               class="com.atlassian.plugin.remotable.plugin.module.webpanel.extractor.confluence.SpaceIdWebPanelParameterExtractor"
               interface="com.atlassian.plugin.remotable.plugin.module.webpanel.extractor.WebPanelParameterExtractor" />

    <component-import key="confluenceSettingsManager"
                      interface="com.atlassian.confluence.setup.settings.SettingsManager"/>

    <web-section key="admin.pages" name="Remotable Plugins" location="system.admin" weight="100">
        <label>Remote Plugins</label>
    </web-section>

    <web-resource-transformer key="macroVariableTransformer" class="com.atlassian.plugin.remotable.plugin.module.confluence.MacroVariableInjectorTransformer"/>

    <web-panel key="bigPipeFooter" class="com.atlassian.plugin.remotable.plugin.product.BigPipeFooter" location="atl.footer"/>

    <rest key="rest" path="/remotable-plugins" version="1">
        <dispatcher>REQUEST</dispatcher>
        <dispatcher>INCLUDE</dispatcher>
        <package>com.atlassian.plugin.remotable.plugin.rest</package>
        <package>com.atlassian.plugin.remotable.plugin.product.confluence.rest</package>
    </rest>

    <component key="macroModuleDescriptorCreator" class="com.atlassian.plugin.remotable.plugin.module.confluence.MacroModuleDescriptorCreator" />
    <component key="macroContentLinkParser" class="com.atlassian.plugin.remotable.plugin.module.confluence.MacroContentLinkParser" />
    <component key="macroContentManager" class="com.atlassian.plugin.remotable.plugin.module.confluence.MacroContentManager"/>
    <component key="confluenceWebHookProvider"
               interface="com.atlassian.webhooks.spi.provider.WebHookProvider" public="true"
               class="com.atlassian.plugin.remotable.plugin.product.confluence.webhook.ConfluenceWebHookProvider" />
    <component key="EventSerializerFactory" class="com.atlassian.plugin.remotable.plugin.product.confluence.webhook.ConfluenceEventSerializerFactory" />
    <component key="WebSudoElevator" class="com.atlassian.plugin.remotable.plugin.product.confluence.ConfluenceWebSudoElevator" />

    <component key="host" class="com.atlassian.plugin.remotable.plugin.module.ServletContextThreadLocalIFrameHost" />

    <component-import key="bandanaManager" interface="com.atlassian.bandana.BandanaManager" />
    <component-import key="spaceManager" interface="com.atlassian.confluence.spaces.SpaceManager" />
    <component-import key="pageManager" interface="com.atlassian.confluence.pages.PageManager" />

    <component-import key="systemInfoService"
                      interface="com.atlassian.confluence.status.service.SystemInformationService"/>
    <component-import key="xmlService" interface="com.atlassian.confluence.xhtml.api.XhtmlContent"/>
    <component-import key="i18nBean" interface="com.atlassian.confluence.util.i18n.I18NBeanFactory"/>

    <component-import key="webSudoManager" interface="com.atlassian.confluence.security.websudo.WebSudoManager" />
    <component-import key="taskManager" interface="com.atlassian.core.task.MultiQueueTaskManager" />
    <component-import key="storageFormatCleaner" interface="com.atlassian.confluence.content.render.xhtml.StorageFormatCleaner" />

    <!-- dynamic modules -->
    <described-module-type key="profile-page" name="User Profile Page" class="com.atlassian.plugin.remotable.plugin.module.page.ProfilePageModuleDescriptor">
        <description>
            A full-sized page that will be decorated as a page in the user's profile area.  A link will be created
            in a default location in the user's profile page.
        </description>
    </described-module-type>

    <described-module-type key="remote-macro" name="Remote Macro" class="com.atlassian.plugin.remotable.plugin.module.confluence.RemoteMacroModuleDescriptor">
        <description>A Confluence macro that returns XHTML in the Confluence storage format</description>
    </described-module-type>

    <described-module-type key="macro-page" class="com.atlassian.plugin.remotable.plugin.module.confluence.MacroPageModuleDescriptor">
        <description>A Confluence macro that loads the remote page as an IFrame</description>
    </described-module-type>
    
    <!-- ################################################# -->
    <!--       REMOVE THESE AFTER REFACTORING SCOPES!!!!   -->
    <!-- ################################################# -->
    <plugin-permission key="read_content" name="Read Content"
                       class="com.atlassian.plugin.remotable.plugin.oldscopes.confluence.ReadContentScope"
                       application="confluence">
        <description>Read spaces, blogs, and pages and associated metadata</description>
    </plugin-permission>

    <plugin-permission key="modify_attachments" name="Modify Attachments"
                       class="com.atlassian.plugin.remotable.plugin.oldscopes.confluence.ModifyAttachmentsScope"
                       application="confluence">
        <description>Add, remove, or move attachments for pages or blog posts</description>
    </plugin-permission>

    <plugin-permission key="read_users_and_groups" name="Read Users and Groups"
                       class="com.atlassian.plugin.remotable.plugin.oldscopes.confluence.ConfluenceReadUsersAndGroupsScope"
                       application="confluence">
        <description>View users, users info, and groups</description>
    </plugin-permission>

    <plugin-permission key="modify_spaces" name="Modify Spaces"
                       class="com.atlassian.plugin.remotable.plugin.oldscopes.confluence.ModifySpacesScope"
                       application="confluence">
        <description>Add, edit and remove spaces</description>
    </plugin-permission>
    <plugin-permission key="read_server_information" name="Read Server Information"
                       class="com.atlassian.plugin.remotable.plugin.oldscopes.confluence.ReadServerInformationScope"
                       application="confluence">
        <description>View Confluence version number, base URL and build information</description>
    </plugin-permission>

    <plugin-permission key="modify_users" name="Modify Users"
                       class="com.atlassian.plugin.remotable.plugin.oldscopes.confluence.ModifyUsersScope"
                       application="confluence">
        <description>Change existing users' information, including profile pictures.  Cannot change passwords.</description>
    </plugin-permission>

    <plugin-permission key="manage_watchers" name="Manage Watchers"
                       class="com.atlassian.plugin.remotable.plugin.oldscopes.confluence.ManageWatchersScope"
                       application="confluence">
        <description>View space, page and blog post watchers. Add new watchers.</description>
    </plugin-permission>

    <plugin-permission key="label_content" name="Label Content"
                       class="com.atlassian.plugin.remotable.plugin.oldscopes.confluence.LabelContentScope"
                       application="confluence">
        <description>Add and remove labels from spaces, pages and blog posts</description>
    </plugin-permission>

    <plugin-permission key="render_content" name="Render Content"
                       class="com.atlassian.plugin.remotable.plugin.oldscopes.confluence.RenderContentScope"
                       application="confluence">
        <description>Convert content into viewable HTML</description>
    </plugin-permission>

    <plugin-permission key="modify_content" name="Modify Content"
                       class="com.atlassian.plugin.remotable.plugin.oldscopes.confluence.ModifyContentScope"
                       application="confluence">
        <description>Add, edit and remove pages and blog posts</description>
    </plugin-permission>

    <plugin-permission key="manage_index" name="Manage Content Index"
                       class="com.atlassian.plugin.remotable.plugin.oldscopes.confluence.ManageIndexScope"
                       application="confluence">
        <description>Manage the content index, including triggering a re-index</description>
    </plugin-permission>

    <plugin-permission key="manage_anonymous_permissions" name="Manage Anonymous Permissions"
                       class="com.atlassian.plugin.remotable.plugin.oldscopes.confluence.ManageAnonymousPermissionsScope"
                       application="confluence">
        <description>Manage anonymous permissions for the Confluence instance</description>
    </plugin-permission>
    
</application>