<application key="confluence">
    <component key="confluenceProductAccessor"
               class="com.atlassian.labs.remoteapps.product.confluence.ConfluenceProductAccessor"/>

    <component-import key="confluenceSettingsManager"
                      interface="com.atlassian.confluence.setup.settings.SettingsManager"/>
    
    <!-- api scopes -->
    <component key="confluence-read_content" class="com.atlassian.labs.remoteapps.product.confluence.ReadContentScope" />
    <component key="confluence-modify_attachments" class="com.atlassian.labs.remoteapps.product.confluence.ModifyAttachmentsScope" />
    <component key="confluence-read_users_and_groups"
               class="com.atlassian.labs.remoteapps.product.confluence.ConfluenceReadUsersAndGroupsScope" />
    <component key="confluence-modify_spaces"
               class="com.atlassian.labs.remoteapps.product.confluence.ModifySpacesScope" />
    <component key="confluence-read_server_information"
               class="com.atlassian.labs.remoteapps.product.confluence.ReadServerInformationScope"/>
    <component key="confluence-modify_users"
               class="com.atlassian.labs.remoteapps.product.confluence.ModifyUsersScope"/>
    <component key="confluence-manage_watchers"
               class="com.atlassian.labs.remoteapps.product.confluence.ManageWatchersScope"/>
    <component key="confluence-label_content"
               class="com.atlassian.labs.remoteapps.product.confluence.LabelContentScope"/>
    <component key="confluence-render_content"
               class="com.atlassian.labs.remoteapps.product.confluence.RenderContentScope"/>
    <component key="confluence-modify_content"
               class="com.atlassian.labs.remoteapps.product.confluence.ModifyContentScope"/>

    <!-- module types -->
    <component key="macro" class="com.atlassian.labs.remoteapps.modules.confluence.MacroModuleGenerator"/>
    <component key="page-macro" class="com.atlassian.labs.remoteapps.modules.confluence.PageMacroModuleGenerator"/>
    <component key="confluence-profile-page" class="com.atlassian.labs.remoteapps.modules.page.ProfilePageModuleGenerator" />

    <web-section key="admin.pages" name="Remote Apps" location="system.admin" weight="100">
        <label>Remote Apps</label>
    </web-section>

    <rest key="rest-confluence" path="/remoteapps" version="1">
        <dispatcher>REQUEST</dispatcher>
        <dispatcher>INCLUDE</dispatcher>
        <package>com.atlassian.labs.remoteapps.rest</package>
        <package>com.atlassian.labs.remoteapps.product.confluence.rest</package>
    </rest>

    <servlet key="remoteAppsImagePlaceholderServlet"
             name="Remote Apps Image Placeholder Servlet"
             class="com.atlassian.labs.remoteapps.product.confluence.RemoteAppsImagePlaceholderServlet">
        <description>Requests the image placeholder for the remote app</description>
        <url-pattern>/remoteImage</url-pattern>
    </servlet>

    <servlet key="remoteApps2LORedirectingServlet"
             name="Remote Apps 2-Legged OAuth Signing and Redirecting Servlet"
             class="com.atlassian.labs.remoteapps.product.confluence.servlet.Confluence2LORedirectingServlet">
        <description>Redirects to Remote Apps, using 2-legged OAuth to sign the outgoing request</description>
        <url-pattern>/oauthRedirect</url-pattern>
    </servlet>

    <component key="macroContentLinkParser" class="com.atlassian.labs.remoteapps.modules.confluence.MacroContentLinkParser" />
    <component key="macroContentManager" class="com.atlassian.labs.remoteapps.modules.confluence.MacroContentManager"/>
    <component key="confluenceWebHookProvider" class="com.atlassian.labs.remoteapps.product.confluence.webhook.ConfluenceWebHookProvider" />
    <component key="confluenceEventSerializerFactory" class="com.atlassian.labs.remoteapps.product.confluence.webhook.ConfluenceEventSerializerFactory" />
    <component key="confluenceWebSudoElevator" class="com.atlassian.labs.remoteapps.product.confluence.ConfluenceWebSudoElevator" />

    <component-import key="bandanaManager" interface="com.atlassian.bandana.BandanaManager" />
    <component-import key="spaceManager" interface="com.atlassian.confluence.spaces.SpaceManager" />
    <component-import key="pageManager" interface="com.atlassian.confluence.pages.PageManager" />

    <component-import key="systemInfoService"
                      interface="com.atlassian.confluence.status.service.SystemInformationService"/>
    <component-import key="xmlService" interface="com.atlassian.confluence.xhtml.api.XhtmlContent"/>
    <component-import key="i18nBean" interface="com.atlassian.confluence.util.i18n.I18NBeanFactory"/>

    <component-import key="webSudoManager" interface="com.atlassian.confluence.security.websudo.WebSudoManager" />

    <!-- activity streams -->
    <!--component-import key="confluenceUserProfileAccessor" interface="com.atlassian.streams.spi.UserProfileAccessor"/>
    <activity-streams-provider key="apps-provider" name="Remote Apps Provider"
                               class="com.atlassian.labs.remoteapps.integration.streams.RemoteAppsActivityProvider">
    </activity-streams-provider-->
</application>