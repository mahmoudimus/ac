<?xml version="1.0" encoding="UTF-8"?>

<atlassian-plugin key="lucidchart-app" name="Lucidchart" plugins-version="2">
    <plugin-info>
        <description>Create Lucidchart diagrams and add them to Confluence</description>
        <version>1.7.2-connect</version>
        <vendor name="Lucidchart" url="https://www.lucidchart.com"/>
        <permissions>
            <permission>read_users_and_groups</permission>
            <permission>read_content</permission>
            <permission>modify_attachments</permission>
            <permission>modify_content</permission>
            <permission>create_oauth_link</permission>
        </permissions>
        <param name="configure.url">/plugins/servlet/atlassian-connect/lucidchart-app/lucidAppAdmin</param>
        <bundle-instructions>
            <Remote-Plugin>installer;user="sysadmin";date="1361408393232";registration-url="https://www.lucidchart.com/ondemand/register"</Remote-Plugin>
        </bundle-instructions>
    </plugin-info>
    <remote-plugin-container key="lucidchart-plugin" display-url="https://www.lucidchart.com/ondemand">
        <oauth callback="/ondemand/callback" request-token-url="/request" access-token-url="/access" authorize-url="/authorize">
            <public-key>-----BEGIN PUBLIC KEY-----
                MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCcL0vy51d7p+gT2YaCeO1P0dsr
                rKSMq9aELONb/eZz/nlNAYkwvl/LO+EcfiM8Al/X/fb9wIHMAXe22VgkCPN41rlX
                3bc2uEk9WYyHk2CVIfZ5ZNKqmZxCqgGkjBtaySop3V2TCjryrPpTOXDmoTTO6x7i
                +8xyKIt3KS2CcM3ccQIDAQAB
                -----END PUBLIC KEY-----
            </public-key>
        </oauth>
    </remote-plugin-container>
    <general-page section="system.content.action/secondary" key="lucidAppGeneral" link-name="Insert Lucidchart Diagram" name="Select or create a diagram" url="/doclist?page_id=${page.id}" width="1200" height="800">
        <description>Insert or Create a Lucidchart Diagram</description>
    </general-page>
    <general-page section="hidden" key="lucidAppRemove" name="Remove Lucidchart Diagram" url="/remove" width="1200" height="800">
    </general-page>
    <general-page section="hidden" key="lucidAppAccessDenied" name="Access Denied to Lucidchart Diagram" url="/accessDenied" width="1200" height="800">
    </general-page>

    <webhook key="remote_plugin_enabled" event="remote_plugin_enabled" url="/remotePluginEnabled"/>

    <configure-page section="system.admin/configuration" key="lucidAppAdmin" name="Configure Lucidchart Plugin" url="/admin" width="1200" height="800">
    </configure-page>

    <remote-macro key="lucidchart" url="/macro" output-type="block" body-type="none">
        <description>Create a Lucidchart Diagram</description>
        <category name="development" />
        <!-- add when CONFDEV-20848 is deployed -->
        <!--<image-placeholder url="/imagePlaceHolder" width="140" height="140" apply-chrome="true"/>-->
        <parameters>
            <parameter name="width" title="Width" type="string" default="700"/>
            <parameter name="height" title="Height" type="string" />
            <parameter name="align" title="Alignment" type="enum" default="Left">
                <value name="Left"/>
                <value name="Right" />
                <value name="Center" />
            </parameter>
            <!--  <parameter name="auto-update" type="boolean" default="true"/> -->
        </parameters>
        <context-parameters>
            <context-parameter name="user_id"/>
            <context-parameter name="page_id"/>
            <context-parameter name="page_title"/>
            <context-parameter name="page_type"/>
            <context-parameter name="output_type"/>
        </context-parameters>
    </remote-macro>
</atlassian-plugin>
