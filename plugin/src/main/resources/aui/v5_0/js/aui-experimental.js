/*! AUI Flat Pack - version 5.0-m13 - generated 2012-10-02 21:18:14 -0400 */


(function(g){var e=g(document),i=(jQuery.browser.msie&&parseInt(jQuery.browser.version,10)==8);var c=(function(){var m=false;function k(p){if(!m&&p.which===1){m=true;e.bind("mouseup mouseleave",l);g(this).trigger("aui-button-invoke")}}function l(){e.unbind("mouseup mouseleave",l);setTimeout(function(){m=false},0)}function o(){if(!m){g(this).trigger("aui-button-invoke")}}function n(p){p.preventDefault()}if(typeof document.addEventListener==="undefined"){return{click:o,"click selectstart":n,mousedown:function(r){k.call(this,r);var s=this;var q=document.activeElement;if(q!==null){q.attachEvent("onbeforedeactivate",p);setTimeout(function(){q.detachEvent("onbeforedeactivate",p)},0)}function p(t){switch(t.toElement){case null:case s:case document.body:case document.documentElement:t.returnValue=false}}}}}return{click:o,"click mousedown":n,mousedown:k}})();var a={"aui-button-invoke":function(F){var l=g(b(this));var k=g(this).addClass("active");var u=k.closest(".aui-dropdown2-trigger-group");v(l.find("a").first());var m={click:function(){if(!g(this).hasClass("interactive")){y()}},mousemove:function(){v(g(this))}};var r={"click focusin mousedown":function(M){var N=M.target;if(!d(N,l[0])&&!d(N,k[0])){y()}},keydown:function(N){if(N.shiftKey&&N.keyCode==9){H(-1)}else{switch(N.keyCode){case 13:var M=l.find("a.active")[0];if(M){j(M)}break;case 27:y();break;case 37:L(-1);break;case 38:H(-1);break;case 39:L(1);break;case 40:H(1);break;case 9:H(1);break;default:return}}N.preventDefault()}};function A(M,N){M.each(function(){var O=g(this);O.attr("role",N);if(O.hasClass("checked")){O.attr("aria-checked","true");if(N=="radio"){O.closest("ul").attr("role","radiogroup")}}else{O.attr("aria-checked","false")}})}k.attr("aria-controls",k.attr("aria-owns"));if(i){l.removeClass("aui-dropdown2-tailed")}l.find(".disabled").attr("aria-disabled","true");l.find("li.hidden > a").addClass("disabled").attr("aria-disabled","true");A(l.find(".aui-dropdown2-checkbox"),"checkbox");A(l.find(".aui-dropdown2-radio"),"radio");l.appendTo(document.body);var s=k.offset();var x=k.outerWidth();var n=l.outerWidth();var t=e.width();var C=Math.max(parseInt(l.css("min-width"),10),x);var w=k.data("container")||false;var o="left";if(i){var D=parseInt(l.css("border-left-width"),10)+parseInt(l.css("border-right-width"),10);n=n-D;C=C-D}l.css({display:"block",top:s.top+k.outerHeight()+"px","min-width":C+"px"}).attr("aria-hidden","false");var p=s.left;if(t<p+n&&n<=p+x){p+=x-n;o="right"}if(w){var B=k.closest(w),E=B.offset().left+B.outerWidth(),q=k.offset().left+k.outerWidth(),K=q+n;if(C>=n){n=C}if(K>q){p=q-n;o="right"}if(i){p-=D}}if(k.hasClass("toolbar-trigger")){l.addClass("aui-dropdown2-in-toolbar")}if(k.parent().hasClass("aui-buttons")){l.addClass("aui-dropdown2-in-buttons")}if(k.parents().hasClass("aui-header")){l.addClass("aui-dropdown2-in-header")}l.attr("data-dropdown2-alignment",o);l.css("left",p+"px");l.trigger("aui-dropdown2-show");G("on");function y(){G("off");setTimeout(function(){l.css("display","none").css("min-width","").insertAfter(k).attr("aria-hidden","true");k.removeClass("active");l.removeClass("aui-dropdown2-in-toolbar");l.removeClass("aui-dropdown2-in-buttons").insertBefore(k.parent());l.trigger("aui-dropdown2-hide")},0)}function v(M){l.find("a.active").removeClass("active");M.addClass("active")}function H(M){v(I(l.find("a:not(.disabled)"),M,true))}function z(M){if(M.length>0){y();M.trigger("aui-button-invoke")}}function L(M){z(I(u.find(".aui-dropdown2-trigger:not([aria-disabled=true])"),M,false))}function I(O,P,N){var M=O.index(O.filter(".active"));M+=(M<0&&P<0)?1:0;M+=P;if(N){M%=O.length}else{if(M<0){M=O.length}}return O.eq(M)}function J(){z(g(this))}function G(N){var O="bind";var M="delegate";if(N!=="on"){O="unbind";M="undelegate"}e[O](r);u[M](".aui-dropdown2-trigger:not(.active)","mousemove",J);k[O]("aui-button-invoke",y);l[M]("a:not(.disabled)",m)}},mousedown:function(k){if(k.which===1){g(this).bind(f)}}};var f={mouseleave:function(){e.bind(h)},"mouseup mouseleave":function(){g(this).unbind(f)}};var h={mouseup:function(k){var l=g(k.target).closest(".aui-dropdown2 a, .aui-dropdown2-trigger")[0];if(l){setTimeout(function(){j(l)},0)}},"mouseup mouseleave":function(){g(this).unbind(h)}};function j(k){if(k.click){k.click()}else{var l=document.createEvent("MouseEvents");l.initMouseEvent("click",true,true,window,0,0,0,0,0,false,false,false,false,0,null);k.dispatchEvent(l)}}function d(l,k){return(l===k)||g.contains(k,l)}function b(m){var n=m.getAttribute("aria-owns"),k=m.getAttribute("aria-haspopup"),l=document.getElementById(n);if(l){return l}else{if(!n){throw new Error("Dropdown 2 trigger required attribute not set: aria-owns")}if(!k){throw new Error("Dropdown 2 trigger required attribute not set: aria-haspopup")}if(!l){throw new Error("Dropdown 2 trigger aria-owns attr set to nonexistent id: "+n)}throw new Error("Dropdown 2 trigger unknown error. I don't know what you did, but there's smoke everywhere. Consult the documentation.")}}e.delegate(".aui-dropdown2-trigger",c);e.delegate(".aui-dropdown2-trigger:not(.active):not([aria-disabled=true])",a);e.delegate(".aui-dropdown2-checkbox:not(.disabled)","click",function(){var k=g(this);if(k.hasClass("checked")){k.removeClass("checked").attr("aria-checked","false");k.trigger("aui-dropdown2-item-uncheck")}else{k.addClass("checked").attr("aria-checked","true");k.trigger("aui-dropdown2-item-check")}});e.delegate(".aui-dropdown2-radio:not(.checked):not(.disabled)","click",function(){var k=g(this);var l=k.closest("ul").find(".checked");l.removeClass("checked").attr("aria-checked","false").trigger("aui-dropdown2-item-uncheck");k.addClass("checked").attr("aria-checked","true").trigger("aui-dropdown2-item-check")});e.delegate(".aui-dropdown2 a.disabled","click",function(k){k.preventDefault()})})(jQuery);
