<div>
    <div id="embedded-$namespace"></div>
    <hr />
    <div id="ra-stats-$namespace" style="color: gray; font-size: smaller">
        Loaded from <span id="ra-key-$namespace"><a href="${remoteapp.displayUrl}">$remoteapp.name</a></span>  in
        <span id="ra-time-$namespace">...</span> ms
    </div>
    <script type="text/javascript" language="javascript">
        (function($) {
            var container = $('#embedded-$namespace');
            var initHeight = '#if($height)$height#else 10em #end';
            var initWidth = '#if($width)$width#else 100%#end';
            var iframeSrc = '$iframeSrcHtml';
            function resize(height, width){
                var iframe = $('iframe', container);
                iframe.css('height', height + "px");
                iframe.css('width', width + (/%/.test(width)? "" : "px"));
            }
            var now = new Date().getTime();
            var rpc = new easyXDM.Rpc(/** The configuration */{
                remote: iframeSrc,

                //ID of the element to attach the inline frame to
                container: "embedded-$namespace",
                channel: "channel-$namespace",
                props: {height : initHeight, width : initWidth}
            }, {
              local : {
                init : function() {
                  container.addClass('iframe-init');
                  $('#ra-time-$namespace').text(new Date().getTime() - now);
                },
                resize : function(height, width) {
                  resize(height, width);
                },
                getLocation : function() {
                  return window.location;
                }
              }
            });
        })(jQuery);
    </script>
</div>