<atlassian-plugin key="${project.groupId}.${project.artifactId}-tests" name="${project.name} tests" plugins-version="2">
    <plugin-info>
        <description>${project.description}</description>
        <version>${project.version}</version>
        <vendor name="${project.organization.name}" url="${project.organization.url}"/>
        <bundle-instructions>
            <Import-Package>
                com.atlassian.plugin.connect*,
                com.atlassian.plugin.connect.*,
                com.atlassian.plugin.connect.modules.beans*,
                com.atlassian.plugin.connect.modules.beans.*,
                *;resolution:=optional
            </Import-Package>
        </bundle-instructions>
    </plugin-info>

    <!-- NOTE, this plugin has to be transformed because there's some magic that makes wired tests work -->
    <component-import key="connectApplinkManager" interface="com.atlassian.plugin.connect.plugin.applinks.ConnectApplinkManager" />
    <component-import key="connectDescriptorValidator" interface="com.atlassian.plugin.connect.modules.schema.ConnectDescriptorValidator" />
    <component-import key="connectSchemaLocator" interface="com.atlassian.plugin.connect.plugin.capabilities.schema.ConnectSchemaLocator" />
    <component-import key="webItemModuleProvider" interface="com.atlassian.plugin.connect.plugin.capabilities.provider.WebItemModuleProvider" />
    <component-import key="connectUpmInstallHandler" interface="com.atlassian.upm.spi.PluginInstallHandler"/>
    <component-import key="applicationProperties" interface="com.atlassian.sal.api.ApplicationProperties"/>
    <component-import key="connectAddonRegistry" interface="com.atlassian.plugin.connect.plugin.installer.ConnectAddonRegistry"/>

    <component key="testPluginInstaller" class="it.com.atlassian.plugin.connect.TestPluginInstaller" />
    <component key="jiraTestAuthenticator" 
               class="it.com.atlassian.plugin.connect.JiraTestAuthenticator" 
               interface="it.com.atlassian.plugin.connect.TestAuthenticator"
               application="jira" />
    <component key="confluenceTestAuthenticator"
               class="it.com.atlassian.plugin.connect.ConfluenceTestAuthenticator"
               interface="it.com.atlassian.plugin.connect.TestAuthenticator"
               application="confluence" />

    <servlet-filter key="connect-test-addon" class="it.com.atlassian.plugin.connect.filter.AddonTestFilter"
                    location="after-encoding" weight="1">
        <url-pattern>/ac-test-addon/*</url-pattern>
    </servlet-filter>

    <component key="testFilterResults" class="it.com.atlassian.plugin.connect.filter.AddonTestFilterResults" />
</atlassian-plugin>
